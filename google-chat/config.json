{
    "name": "Google Chat",
    "display_name": "Google Chat",
    "version": "1.0.0",
    "description": "Send messages, manage spaces, and interact with Google Chat conversations as a user",
    "entry_point": "google_chat.py",
    "auth": {
        "type": "platform",
        "provider": "Google Chat",
        "scopes": [
            "https://www.googleapis.com/auth/chat.messages",
            "https://www.googleapis.com/auth/chat.spaces",
            "https://www.googleapis.com/auth/chat.messages.reactions",
            "https://www.googleapis.com/auth/chat.memberships.readonly"
        ]
    },
    "actions": {
        "list_spaces": {
            "display_name": "List Spaces",
            "description": "List all Google Chat spaces the user is a member of, including direct messages, group chats, and named spaces",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_size": {
                        "type": "integer",
                        "description": "Maximum number of spaces to return (default 100, max 1000)",
                        "minimum": 1,
                        "maximum": 1000,
                        "default": 100
                    },
                    "page_token": {
                        "type": "string",
                        "description": "Page token for pagination from previous response"
                    },
                    "filter": {
                        "type": "string",
                        "description": "Filter spaces by type. Example: 'spaceType = \"SPACE\"' for named spaces only"
                    }
                },
                "required": []
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "spaces": {
                        "type": "array",
                        "description": "List of Google Chat spaces",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "Resource name of the space"
                                },
                                "display_name": {
                                    "type": "string",
                                    "description": "Display name of the space"
                                },
                                "space_type": {
                                    "type": "string",
                                    "description": "Type of space (SPACE, GROUP_CHAT, DIRECT_MESSAGE)"
                                },
                                "single_user_bot_dm": {
                                    "type": "boolean",
                                    "description": "Whether this is a DM with a single user bot"
                                },
                                "threaded": {
                                    "type": "boolean",
                                    "description": "Whether messages are threaded in this space"
                                },
                                "space_thread_state": {
                                    "type": "string",
                                    "description": "Threading state of the space"
                                },
                                "space_details": {
                                    "type": "object",
                                    "description": "Additional space details like description and guidelines"
                                }
                            },
                            "required": ["name", "space_type"]
                        }
                    },
                    "next_page_token": {
                        "type": "string",
                        "description": "Token for next page of results"
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["spaces", "result"]
            }
        },

        "get_space": {
            "display_name": "Get Space",
            "description": "Get details about a specific Google Chat space including its properties and settings",
            "input_schema": {
                "type": "object",
                "properties": {
                    "space_name": {
                        "type": "string",
                        "description": "Resource name of the space (e.g., 'spaces/AAAAMpdlehY')"
                    }
                },
                "required": ["space_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "space": {
                        "type": "object",
                        "description": "Complete space object with all properties",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the space"
                            },
                            "display_name": {
                                "type": "string",
                                "description": "Display name of the space"
                            },
                            "space_type": {
                                "type": "string",
                                "description": "Type of space (SPACE, GROUP_CHAT, DIRECT_MESSAGE)"
                            },
                            "space_threading_state": {
                                "type": "string",
                                "description": "Threading state"
                            },
                            "space_details": {
                                "type": "object",
                                "description": "Space details including description"
                            },
                            "space_history_state": {
                                "type": "string",
                                "description": "History visibility state"
                            },
                            "import_mode": {
                                "type": "boolean",
                                "description": "Whether space is in import mode"
                            },
                            "create_time": {
                                "type": "string",
                                "description": "Space creation timestamp"
                            },
                            "admin_installed": {
                                "type": "boolean",
                                "description": "Whether space was admin installed"
                            }
                        },
                        "required": ["name", "space_type"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["space", "result"]
            }
        },

        "create_space": {
            "display_name": "Create Space",
            "description": "Create a new Google Chat space with specified settings and initial members",
            "input_schema": {
                "type": "object",
                "properties": {
                    "display_name": {
                        "type": "string",
                        "description": "Display name for the new space (required)"
                    },
                    "space_type": {
                        "type": "string",
                        "description": "Type of space to create (SPACE for named spaces)",
                        "enum": ["SPACE"],
                        "default": "SPACE"
                    },
                    "space_details": {
                        "type": "object",
                        "description": "Additional space configuration",
                        "properties": {
                            "description": {
                                "type": "string",
                                "description": "Description of the space"
                            },
                            "guidelines": {
                                "type": "string",
                                "description": "Guidelines for the space"
                            }
                        }
                    }
                },
                "required": ["display_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "space": {
                        "type": "object",
                        "description": "Created space object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the created space"
                            },
                            "display_name": {
                                "type": "string",
                                "description": "Display name of the space"
                            },
                            "space_type": {
                                "type": "string",
                                "description": "Type of space created"
                            }
                        },
                        "required": ["name", "display_name", "space_type"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["space", "result"]
            }
        },

        "send_message": {
            "display_name": "Send Message",
            "description": "Send a text message to a Google Chat space. With user authentication, only text messages with basic formatting are supported",
            "input_schema": {
                "type": "object",
                "properties": {
                    "space_name": {
                        "type": "string",
                        "description": "Resource name of the space to send message to (e.g., 'spaces/AAAAMpdlehY')"
                    },
                    "text": {
                        "type": "string",
                        "description": "Text content of the message. Supports @mentions, hyperlinks, and basic formatting"
                    },
                    "thread_key": {
                        "type": "string",
                        "description": "Optional thread key to reply to a specific thread"
                    },
                    "message_id": {
                        "type": "string",
                        "description": "Optional client-assigned message ID (must start with 'client-')"
                    },
                    "message_reply_option": {
                        "type": "string",
                        "description": "How to handle replies in threaded spaces",
                        "enum": ["REPLY_MESSAGE_FALLBACK_TO_NEW_THREAD", "REPLY_MESSAGE_OR_FAIL"]
                    }
                },
                "required": ["space_name", "text"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "object",
                        "description": "Sent message object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the message"
                            },
                            "text": {
                                "type": "string",
                                "description": "Text content of the message"
                            },
                            "create_time": {
                                "type": "string",
                                "description": "Message creation timestamp"
                            },
                            "sender": {
                                "type": "object",
                                "description": "User who sent the message"
                            },
                            "thread": {
                                "type": "object",
                                "description": "Thread information if message is threaded"
                            }
                        },
                        "required": ["name", "text"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["message", "result"]
            }
        },

        "list_messages": {
            "display_name": "List Messages",
            "description": "List messages from a Google Chat space with filtering and pagination options",
            "input_schema": {
                "type": "object",
                "properties": {
                    "space_name": {
                        "type": "string",
                        "description": "Resource name of the space (e.g., 'spaces/AAAAMpdlehY')"
                    },
                    "page_size": {
                        "type": "integer",
                        "description": "Maximum number of messages to return (default 25, max 1000)",
                        "minimum": 1,
                        "maximum": 1000,
                        "default": 25
                    },
                    "page_token": {
                        "type": "string",
                        "description": "Page token for pagination from previous response"
                    },
                    "filter": {
                        "type": "string",
                        "description": "Filter messages by timestamp or thread. Example: 'createTime > \"2023-04-21T11:30:00-04:00\"'"
                    },
                    "order_by": {
                        "type": "string",
                        "description": "Sort order for messages (e.g., 'createTime desc')"
                    },
                    "show_deleted": {
                        "type": "boolean",
                        "description": "Whether to include deleted messages",
                        "default": false
                    }
                },
                "required": ["space_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "messages": {
                        "type": "array",
                        "description": "List of messages from the space",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "Resource name of the message"
                                },
                                "text": {
                                    "type": "string",
                                    "description": "Text content of the message"
                                },
                                "formatted_text": {
                                    "type": "string",
                                    "description": "Formatted text with markup"
                                },
                                "create_time": {
                                    "type": "string",
                                    "description": "Message creation timestamp"
                                },
                                "last_update_time": {
                                    "type": "string",
                                    "description": "Last update timestamp"
                                },
                                "sender": {
                                    "type": "object",
                                    "description": "User who sent the message"
                                },
                                "thread": {
                                    "type": "object",
                                    "description": "Thread information"
                                },
                                "space": {
                                    "type": "object",
                                    "description": "Space where message was sent"
                                }
                            },
                            "required": ["name", "create_time", "sender"]
                        }
                    },
                    "next_page_token": {
                        "type": "string",
                        "description": "Token for next page of results"
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["messages", "result"]
            }
        },

        "get_message": {
            "display_name": "Get Message",
            "description": "Get details about a specific message in Google Chat",
            "input_schema": {
                "type": "object",
                "properties": {
                    "message_name": {
                        "type": "string",
                        "description": "Resource name of the message (e.g., 'spaces/AAAAMpdlehY/messages/xyz')"
                    }
                },
                "required": ["message_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "object",
                        "description": "Complete message object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the message"
                            },
                            "text": {
                                "type": "string",
                                "description": "Text content of the message"
                            },
                            "formatted_text": {
                                "type": "string",
                                "description": "Formatted text with markup"
                            },
                            "create_time": {
                                "type": "string",
                                "description": "Message creation timestamp"
                            },
                            "last_update_time": {
                                "type": "string",
                                "description": "Last update timestamp"
                            },
                            "delete_time": {
                                "type": "string",
                                "description": "Deletion timestamp if deleted"
                            },
                            "sender": {
                                "type": "object",
                                "description": "User who sent the message"
                            },
                            "thread": {
                                "type": "object",
                                "description": "Thread information"
                            },
                            "space": {
                                "type": "object",
                                "description": "Space containing the message"
                            },
                            "argument_text": {
                                "type": "string",
                                "description": "Arguments if message was sent via slash command"
                            },
                            "slash_command": {
                                "type": "object",
                                "description": "Slash command details if applicable"
                            },
                            "attachment": {
                                "type": "array",
                                "description": "Message attachments",
                                "items": {
                                    "type": "object"
                                }
                            },
                            "annotations": {
                                "type": "array",
                                "description": "Message annotations like mentions",
                                "items": {
                                    "type": "object"
                                }
                            }
                        },
                        "required": ["name", "create_time", "sender"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["message", "result"]
            }
        },

        "update_message": {
            "display_name": "Update Message",
            "description": "Update a message that was previously sent. Only text content can be updated with user authentication",
            "input_schema": {
                "type": "object",
                "properties": {
                    "message_name": {
                        "type": "string",
                        "description": "Resource name of the message to update"
                    },
                    "text": {
                        "type": "string",
                        "description": "New text content for the message"
                    },
                    "update_mask": {
                        "type": "string",
                        "description": "Field mask specifying which fields to update (e.g., 'text')",
                        "default": "text"
                    }
                },
                "required": ["message_name", "text"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "object",
                        "description": "Updated message object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the message"
                            },
                            "text": {
                                "type": "string",
                                "description": "Updated text content"
                            },
                            "last_update_time": {
                                "type": "string",
                                "description": "Last update timestamp"
                            }
                        },
                        "required": ["name", "text", "last_update_time"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["message", "result"]
            }
        },

        "delete_message": {
            "display_name": "Delete Message",
            "description": "Delete a message from Google Chat. Only messages sent by the authenticated user can be deleted",
            "input_schema": {
                "type": "object",
                "properties": {
                    "message_name": {
                        "type": "string",
                        "description": "Resource name of the message to delete"
                    },
                    "force": {
                        "type": "boolean",
                        "description": "When true, deletes message for all users. When false, only removes for the calling user",
                        "default": false
                    }
                },
                "required": ["message_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["result"]
            }
        },

        "list_members": {
            "display_name": "List Space Members",
            "description": "List all members in a Google Chat space, including users and Chat apps",
            "input_schema": {
                "type": "object",
                "properties": {
                    "space_name": {
                        "type": "string",
                        "description": "Resource name of the space (e.g., 'spaces/AAAAMpdlehY')"
                    },
                    "page_size": {
                        "type": "integer",
                        "description": "Maximum number of members to return (default 100, max 1000)",
                        "minimum": 1,
                        "maximum": 1000,
                        "default": 100
                    },
                    "page_token": {
                        "type": "string",
                        "description": "Page token for pagination from previous response"
                    },
                    "filter": {
                        "type": "string",
                        "description": "Filter members by role. Example: 'role=\"ROLE_MANAGER\"'"
                    }
                },
                "required": ["space_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "members": {
                        "type": "array",
                        "description": "List of space members",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "Resource name of the membership"
                                },
                                "member": {
                                    "type": "object",
                                    "description": "User or app details"
                                },
                                "state": {
                                    "type": "string",
                                    "description": "Membership state (JOINED, INVITED, NOT_A_MEMBER)"
                                },
                                "role": {
                                    "type": "string",
                                    "description": "Member role (ROLE_MEMBER, ROLE_MANAGER)"
                                },
                                "create_time": {
                                    "type": "string",
                                    "description": "Membership creation time"
                                },
                                "delete_time": {
                                    "type": "string",
                                    "description": "Membership deletion time if removed"
                                }
                            },
                            "required": ["name", "state"]
                        }
                    },
                    "next_page_token": {
                        "type": "string",
                        "description": "Token for next page of results"
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["members", "result"]
            }
        },

        "add_reaction": {
            "display_name": "Add Reaction",
            "description": "Add an emoji reaction to a message in Google Chat",
            "input_schema": {
                "type": "object",
                "properties": {
                    "message_name": {
                        "type": "string",
                        "description": "Resource name of the message to react to"
                    },
                    "emoji": {
                        "type": "object",
                        "description": "Emoji to use for the reaction",
                        "properties": {
                            "unicode": {
                                "type": "string",
                                "description": "Unicode emoji (e.g., 'üëç')"
                            },
                            "custom_emoji": {
                                "type": "object",
                                "description": "Custom emoji details",
                                "properties": {
                                    "uid": {
                                        "type": "string",
                                        "description": "Custom emoji unique ID"
                                    }
                                }
                            }
                        }
                    }
                },
                "required": ["message_name", "emoji"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reaction": {
                        "type": "object",
                        "description": "Created reaction object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the reaction"
                            },
                            "user": {
                                "type": "object",
                                "description": "User who created the reaction"
                            },
                            "emoji": {
                                "type": "object",
                                "description": "Emoji used in the reaction"
                            }
                        },
                        "required": ["name", "emoji"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["reaction", "result"]
            }
        },

        "list_reactions": {
            "display_name": "List Message Reactions",
            "description": "List all reactions on a specific message in Google Chat",
            "input_schema": {
                "type": "object",
                "properties": {
                    "message_name": {
                        "type": "string",
                        "description": "Resource name of the message"
                    },
                    "page_size": {
                        "type": "integer",
                        "description": "Maximum number of reactions to return",
                        "minimum": 1,
                        "maximum": 1000,
                        "default": 25
                    },
                    "page_token": {
                        "type": "string",
                        "description": "Page token for pagination"
                    },
                    "filter": {
                        "type": "string",
                        "description": "Filter reactions by emoji"
                    }
                },
                "required": ["message_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reactions": {
                        "type": "array",
                        "description": "List of reactions on the message",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "Resource name of the reaction"
                                },
                                "user": {
                                    "type": "object",
                                    "description": "User who created the reaction"
                                },
                                "emoji": {
                                    "type": "object",
                                    "description": "Emoji used in the reaction"
                                }
                            },
                            "required": ["name", "emoji"]
                        }
                    },
                    "next_page_token": {
                        "type": "string",
                        "description": "Token for next page of results"
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["reactions", "result"]
            }
        },

        "remove_reaction": {
            "display_name": "Remove Reaction",
            "description": "Remove an emoji reaction from a message in Google Chat",
            "input_schema": {
                "type": "object",
                "properties": {
                    "reaction_name": {
                        "type": "string",
                        "description": "Resource name of the reaction to remove"
                    }
                },
                "required": ["reaction_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["result"]
            }
        },

        "find_direct_message": {
            "display_name": "Find Direct Message",
            "description": "Find an existing direct message conversation with another user, or returns details to create one",
            "input_schema": {
                "type": "object",
                "properties": {
                    "user_name": {
                        "type": "string",
                        "description": "Resource name of the user to find DM with (e.g., 'users/example@gmail.com')"
                    }
                },
                "required": ["user_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "space": {
                        "type": "object",
                        "description": "Direct message space object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "Resource name of the DM space"
                            },
                            "space_type": {
                                "type": "string",
                                "description": "Should be DIRECT_MESSAGE"
                            },
                            "single_user_bot_dm": {
                                "type": "boolean",
                                "description": "Whether this is a bot DM"
                            }
                        },
                        "required": ["name", "space_type"]
                    },
                    "result": {
                        "type": "boolean",
                        "description": "Success status"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if operation failed"
                    }
                },
                "required": ["space", "result"]
            }
        }
    }
}