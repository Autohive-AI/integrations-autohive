# Shotstack Integration

Shotstack integration for automated video editing, rendering, and asset management using the cloud video editing API.

## Overview

Shotstack is a cloud-based video editing API that enables developers to automate video production at scale. This integration provides access to all four Shotstack APIs:

- **Edit API**: Create and render videos programmatically
- **Serve API**: Manage and host rendered assets
- **Ingest API**: Upload and transform source media
- **Create API**: Generate assets using AI providers

## Authentication

This integration uses API key authentication. You'll need:

1. **API Key**: Get your API key from the [Shotstack Dashboard](https://dashboard.shotstack.io/apikeys)
2. **Environment**: Choose between:
   - `stage` - Development sandbox (outputs are watermarked, free to use)
   - `v1` - Production (no watermarks, usage is billed)

## Actions

### Edit API - Rendering

| Action | Description |
|--------|-------------|
| `render_video` | Submit a video render job using a JSON edit specification |
| `get_render_status` | Check the status of a render job and get the output URL |
| `probe_media` | Inspect a media file to get metadata (duration, dimensions, etc.) |

### Edit API - Templates

| Action | Description |
|--------|-------------|
| `create_template` | Create a reusable template from an edit specification |
| `list_templates` | Get a list of all saved templates |
| `get_template` | Get a template by its ID |
| `update_template` | Update an existing template |
| `delete_template` | Delete a template |
| `render_template` | Render a video using a saved template with merge fields |

### Serve API - Asset Management

| Action | Description |
|--------|-------------|
| `get_asset` | Get details of a hosted asset |
| `delete_asset` | Delete a hosted asset |
| `get_render_assets` | Get all assets generated by a render job |
| `transfer_asset` | Transfer an asset to external storage (S3, etc.) |

### Ingest API - Source Management

| Action | Description |
|--------|-------------|
| `ingest_source` | Ingest and transform a source file |
| `list_sources` | Get a list of all ingested sources |
| `get_source` | Get details of an ingested source |
| `delete_source` | Delete an ingested source |

### Create API - AI Generation

| Action | Description |
|--------|-------------|
| `create_generated_asset` | Generate images, videos, voiceovers, or text using AI |
| `get_generated_asset` | Check the status of an AI-generated asset |

## Example Usage

### Render a Simple Video

```python
# Create a simple video with a title
inputs = {
    "timeline": {
        "tracks": [
            {
                "clips": [
                    {
                        "asset": {
                            "type": "title",
                            "text": "Hello World",
                            "style": "minimal"
                        },
                        "start": 0,
                        "length": 5
                    }
                ]
            }
        ]
    },
    "output": {
        "format": "mp4",
        "resolution": "hd"
    }
}

result = await shotstack.execute_action("render_video", inputs, context)
render_id = result["render_id"]
```

### Check Render Status

```python
inputs = {"render_id": "abc123-def456"}
result = await shotstack.execute_action("get_render_status", inputs, context)

if result["status"] == "done":
    video_url = result["url"]
```

### Create and Use a Template

```python
# Create a template
template_inputs = {
    "name": "Welcome Video",
    "template": {
        "timeline": {
            "tracks": [
                {
                    "clips": [
                        {
                            "asset": {
                                "type": "title",
                                "text": "Welcome, {{NAME}}!"
                            },
                            "start": 0,
                            "length": 5
                        }
                    ]
                }
            ]
        },
        "output": {
            "format": "mp4",
            "resolution": "hd"
        }
    }
}
result = await shotstack.execute_action("create_template", template_inputs, context)
template_id = result["template_id"]

# Render the template with merge fields
render_inputs = {
    "template_id": template_id,
    "merge": [
        {"find": "NAME", "replace": "John"}
    ]
}
result = await shotstack.execute_action("render_template", render_inputs, context)
```

### Generate AI Content

```python
# Generate an image using AI
inputs = {
    "provider": "stability",
    "options": {
        "type": "image",
        "prompt": "A beautiful sunset over mountains"
    }
}
result = await shotstack.execute_action("create_generated_asset", inputs, context)
asset_id = result["asset_id"]

# Check generation status
status_inputs = {"asset_id": asset_id}
result = await shotstack.execute_action("get_generated_asset", status_inputs, context)
```

## Resources

- [Shotstack API Documentation](https://shotstack.io/docs/api/)
- [Shotstack Guide](https://shotstack.io/docs/guide/)
- [Shotstack Dashboard](https://dashboard.shotstack.io/)
