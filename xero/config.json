{
    "name": "Xero",
    "version": "1.0.0",
    "description": "Xero accounting integration for aged payables and receivables reporting",
    "entry_point": "xero.py",
    "auth": {
        "type": "platform",
        "provider": "Xero",
        "scopes": ["accounting.reports.read", "accounting.contacts.read", "accounting.settings.read", "accounting.transactions.read", "offline_access"]
    },
    "actions": {
        "get_available_connections": {
            "display_name": "Get Available Connections",
            "description": "Gets all available Xero tenant connections and returns company names with tenant IDs",
            "input_schema": {
                "type": "object",
                "properties": {},
                "required": []
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "description": "Whether the request was successful"
                    },
                    "companies": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "tenant_id": {
                                    "type": "string",
                                    "description": "Xero tenant ID"
                                },
                                "company_name": {
                                    "type": "string",
                                    "description": "Xero tenant/company name"
                                }
                            },
                            "required": ["tenant_id", "company_name"]
                        }
                    },
                    "message": {
                        "type": "string",
                        "description": "Error message if success is false"
                    }
                },
                "required": ["success", "companies"]
            }
        },
        "find_contact_by_name": {
            "display_name": "Find Contact by Name",
            "description": "Finds contact ID by searching for contacts with matching name in Xero using the Name field",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "contact_name": {
                        "type": "string",
                        "description": "Contact/organization name to search for (will match against Name field)"
                    }
                },
                "required": ["tenant_id", "contact_name"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "contacts": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "contact_id": {
                                    "type": "string",
                                    "description": "Contact ID (GUID)"
                                },
                                "name": {
                                    "type": "string",
                                    "description": "Contact name from Name field"
                                },
                                "contact_status": {
                                    "type": "string",
                                    "description": "Contact status"
                                }
                            },
                            "required": ["contact_id", "name"]
                        }
                    }
                },
                "required": ["contacts"]
            }
        },
        "get_aged_payables": {
            "display_name": "Get Aged Payables",
            "description": "Retrieves aged payables report from Xero for a specific contact",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "contact_id": {
                        "type": "string",
                        "description": "Contact ID (GUID) for which to retrieve aged payables"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Report date (YYYY-MM-DD). Defaults to today if not specified"
                    }
                },
                "required": ["tenant_id", "contact_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reports": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "report_id": {
                                    "type": "string",
                                    "description": "Report identifier"
                                },
                                "report_name": {
                                    "type": "string",
                                    "description": "Report name"
                                },
                                "report_date": {
                                    "type": "string",
                                    "description": "Report date"
                                },
                                "rows": {
                                    "type": "array",
                                    "description": "Report data rows"
                                }
                            }
                        }
                    }
                },
                "description": "Raw Xero API response for Aged Payables report"
            }
        },
        "get_aged_receivables": {
            "display_name": "Get Aged Receivables",
            "description": "Retrieves aged receivables report from Xero for a specific contact",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "contact_id": {
                        "type": "string",
                        "description": "Contact ID (GUID) for which to retrieve aged receivables"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Report date (YYYY-MM-DD). Defaults to today if not specified"
                    }
                },
                "required": ["tenant_id", "contact_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reports": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "report_id": {
                                    "type": "string",
                                    "description": "Report identifier"
                                },
                                "report_name": {
                                    "type": "string",
                                    "description": "Report name"
                                },
                                "report_date": {
                                    "type": "string",
                                    "description": "Report date"
                                },
                                "rows": {
                                    "type": "array",
                                    "description": "Report data rows"
                                }
                            }
                        }
                    }
                },
                "description": "Raw Xero API response for Aged Receivables report"
            }
        },
        "get_balance_sheet": {
            "display_name": "Get Balance Sheet",
            "description": "Retrieves balance sheet report from Xero",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Report date (YYYY-MM-DD). Defaults to today if not specified"
                    },
                    "periods": {
                        "type": "integer",
                        "description": "Number of periods to compare (optional)",
                        "minimum": 1,
                        "maximum": 12
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reports": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "report_id": {
                                    "type": "string",
                                    "description": "Report identifier"
                                },
                                "report_name": {
                                    "type": "string",
                                    "description": "Report name"
                                },
                                "report_date": {
                                    "type": "string",
                                    "description": "Report date"
                                },
                                "rows": {
                                    "type": "array",
                                    "description": "Report data rows"
                                }
                            }
                        }
                    }
                },
                "description": "Raw Xero API response for Balance Sheet report"
            }
        },
        "get_profit_and_loss": {
            "display_name": "Get Profit and Loss",
            "description": "Retrieves profit and loss statement from Xero",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Report date (YYYY-MM-DD). Defaults to today if not specified"
                    },
                    "from_date": {
                        "type": "string",
                        "format": "date",
                        "description": "Start date for the report period (YYYY-MM-DD)"
                    },
                    "to_date": {
                        "type": "string",
                        "format": "date",
                        "description": "End date for the report period (YYYY-MM-DD)"
                    },
                    "timeframe": {
                        "type": "string",
                        "enum": ["MONTH", "QUARTER", "YEAR"],
                        "description": "Timeframe for period comparisons (optional)"
                    },
                    "periods": {
                        "type": "integer",
                        "description": "Number of periods to compare (optional)",
                        "minimum": 1,
                        "maximum": 12
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reports": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "report_id": {
                                    "type": "string",
                                    "description": "Report identifier"
                                },
                                "report_name": {
                                    "type": "string",
                                    "description": "Report name"
                                },
                                "report_date": {
                                    "type": "string",
                                    "description": "Report date"
                                },
                                "rows": {
                                    "type": "array",
                                    "description": "Report data rows"
                                }
                            }
                        }
                    }
                },
                "description": "Raw Xero API response for Profit and Loss statement"
            }
        },
        "get_trial_balance": {
            "display_name": "Get Trial Balance",
            "description": "Retrieves trial balance report from Xero",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Report date (YYYY-MM-DD). Defaults to last date of last calendar month if not specified"
                    },
                    "payments_only": {
                        "type": "boolean",
                        "description": "Whether to include only payments (optional, defaults to false)"
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "reports": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "report_id": {
                                    "type": "string",
                                    "description": "Report identifier"
                                },
                                "report_name": {
                                    "type": "string",
                                    "description": "Report name"
                                },
                                "report_date": {
                                    "type": "string",
                                    "description": "Report date"
                                },
                                "rows": {
                                    "type": "array",
                                    "description": "Report data rows"
                                }
                            }
                        }
                    }
                },
                "description": "Raw Xero API response for Trial Balance report"
            }
        },
        "get_accounts": {
            "display_name": "Get Accounts",
            "description": "Retrieves accounts from Xero to classify line items (revenue, expenses, fixed assets, loans, equity/dividends, GST)",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "where": {
                        "type": "string",
                        "description": "Optional Xero where filter clause. Filter by any element using Xero syntax. Examples: Status=\"ACTIVE\", Type=\"REVENUE\", Code>=\"4000\". Use range operators (>, >=, <, <=) and combine with AND/OR operators."
                    },
                    "order": {
                        "type": "string",
                        "description": "Optional Xero orderby parameter. Order by any element returned. Examples: \"Code ASC\", \"Name DESC\", \"Type ASC\". Multi-field sorting: \"Type ASC, Code ASC\". Note: Some fields are optimized for better performance."
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "accounts": {
                        "type": "array",
                        "description": "Array of Xero accounts"
                    }
                },
                "description": "Raw Xero API response for Accounts"
            }
        },
        "get_payments": {
            "display_name": "Get Payments",
            "description": "Retrieves payments from Xero for cash on invoices/bills (customer receipts, supplier payments, cash refunds)",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "where": {
                        "type": "string",
                        "description": "Optional Xero where filter clause. Optimized fields include PaymentType, Status, Date, Invoice.InvoiceId, Reference. Examples: PaymentType=\"ACCRECPAYMENT\", Status=\"AUTHORISED\", Date>=DateTime(2020,01,01), Reference=\"INV-0001\". Date ranges: Date>=DateTime(2020,01,01) AND Date<DateTime(2020,02,01). Use AND/OR operators and range operators (>, >=, <, <=)."
                    },
                    "order": {
                        "type": "string",
                        "description": "Optional Xero orderby parameter. Optimized fields for ordering: UpdatedDateUTC, Date, PaymentId. Examples: \"UpdatedDateUTC ASC\", \"Date DESC\", \"PaymentId ASC\". Multi-field sorting: \"Date DESC, PaymentId ASC\". Default order is UpdatedDateUTC ASC, PaymentId ASC."
                    },
                    "page": {
                        "type": "integer",
                        "description": "Optional page number for pagination. Default is 100 payments per page when used alone."
                    },
                    "pageSize": {
                        "type": "integer",
                        "description": "Optional page size for pagination (1-1000). Used with page parameter. Examples: page=1&pageSize=250."
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "payments": {
                        "type": "array",
                        "description": "Array of Xero payments"
                    }
                },
                "description": "Raw Xero API response for Payments"
            }
        },
        "get_bank_transactions": {
            "display_name": "Get Bank Transactions",
            "description": "Retrieves bank transactions from Xero for Receive/Spend Money not tied to invoices (CapEx, financing, other operating)",
            "input_schema": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "string",
                        "description": "Xero tenant ID"
                    },
                    "where": {
                        "type": "string",
                        "description": "Optional Xero where filter clause. Optimized fields include Type, Status, Date, Contact.ContactID. Examples: Type=\"RECEIVE\", Status=\"AUTHORISED\", Date>=DateTime(2020,01,01), Contact.ContactID=guid(\"96988e67-ecf9-466d-bfbf-0afa1725a649\"). Date ranges: Date>=DateTime(2020,01,01) AND Date<DateTime(2020,02,01). Use AND/OR operators and range operators (>, >=, <, <=)."
                    },
                    "order": {
                        "type": "string",
                        "description": "Optional Xero orderby parameter. Optimized fields for ordering: BankTransactionID, UpdatedDateUTC, Date. Examples: \"Date ASC\", \"UpdatedDateUTC DESC\", \"BankTransactionID ASC\". Multi-field sorting: \"Date DESC, BankTransactionID ASC\". Default order is UpdatedDateUTC ASC, BankTransactionID ASC."
                    },
                    "page": {
                        "type": "integer",
                        "description": "Optional page number for pagination"
                    }
                },
                "required": ["tenant_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "bank_transactions": {
                        "type": "array",
                        "description": "Array of Xero bank transactions"
                    }
                },
                "description": "Raw Xero API response for Bank Transactions"
            }
        }
    }
}