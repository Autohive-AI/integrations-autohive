{
    "name": "Facebook",
    "version": "1.0.0",
    "description": "Facebook Pages integration for managing posts, comments, and insights",
    "entry_point": "facebook.py",
    "auth": {
        "type": "platform",
        "provider": "facebook",
        "scopes": [
            "pages_show_list",
            "pages_read_engagement",
            "pages_read_user_content",
            "pages_manage_posts",
            "pages_manage_engagement",
            "pages_manage_metadata",
            "read_insights"
        ]
    },
    "actions": {
        "list_pages": {
            "display_name": "List Pages",
            "description": "Discover all Facebook Pages you can manage. Returns page names, IDs, and categories. Required to identify which page to interact with.",
            "input_schema": {
                "type": "object",
                "properties": {},
                "required": []
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "pages": {
                        "type": "array",
                        "description": "List of Facebook Pages you can manage",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {"type": "string", "description": "Unique Page ID"},
                                "name": {"type": "string", "description": "Page name"},
                                "category": {"type": "string", "description": "Page category (e.g., Business, Brand)"},
                                "followers_count": {"type": "integer", "description": "Number of page followers"}
                            }
                        }
                    }
                },
                "required": ["pages"]
            }
        },
        "get_posts": {
            "display_name": "Get Posts",
            "description": "Retrieve posts from a Facebook Page. Fetch a single post by ID, or list recent posts. Includes message content, media, and engagement metrics.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_id": {
                        "type": "string",
                        "description": "The Facebook Page ID"
                    },
                    "post_id": {
                        "type": "string",
                        "description": "Optional: Specific post ID to retrieve. If omitted, returns recent posts."
                    },
                    "limit": {
                        "type": "integer",
                        "description": "Maximum number of posts to return (default: 25, max: 100). Only used when listing posts.",
                        "default": 25
                    }
                },
                "required": ["page_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "posts": {
                        "type": "array",
                        "description": "List of posts (single item if post_id specified)",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {"type": "string", "description": "Post ID"},
                                "message": {"type": "string", "description": "Post text content"},
                                "created_time": {"type": "string", "description": "ISO 8601 timestamp"},
                                "permalink_url": {"type": "string", "description": "Direct link to the post"},
                                "shares_count": {"type": "integer", "description": "Number of shares"},
                                "likes_count": {"type": "integer", "description": "Number of likes"},
                                "comments_count": {"type": "integer", "description": "Number of comments"},
                                "media_type": {"type": "string", "description": "Type of media: text, photo, video, or link"},
                                "media_url": {"type": ["string", "null"], "description": "URL of attached media if applicable"}
                            }
                        }
                    }
                },
                "required": ["posts"]
            }
        },
        "create_post": {
            "display_name": "Create Post",
            "description": "Publish content to a Facebook Page. Supports text posts, photos, videos, and links. Can publish immediately or schedule for later.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_id": {
                        "type": "string",
                        "description": "The Facebook Page ID to post to"
                    },
                    "message": {
                        "type": "string",
                        "description": "The text content of the post"
                    },
                    "media_type": {
                        "type": "string",
                        "enum": ["text", "photo", "video", "link"],
                        "description": "Type of post: 'text' (default), 'photo', 'video', or 'link'",
                        "default": "text"
                    },
                    "media_url": {
                        "type": "string",
                        "description": "Required for photo/video/link: URL of the media or link to share"
                    },
                    "scheduled_time": {
                        "type": "string",
                        "description": "Optional: Schedule post for future. ISO 8601 format (e.g., 2024-12-25T10:00:00Z) or UNIX timestamp. Must be 10 min to 75 days from now."
                    }
                },
                "required": ["page_id", "message"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "post_id": {"type": "string", "description": "ID of the created post"},
                    "permalink_url": {"type": "string", "description": "Direct link to the post"},
                    "is_scheduled": {"type": "boolean", "description": "Whether the post is scheduled"},
                    "scheduled_time": {"type": "integer", "description": "Scheduled publish time as Unix timestamp if applicable"}
                },
                "required": ["post_id"]
            }
        },
        "delete_post": {
            "display_name": "Delete Post",
            "description": "Permanently delete a post from a Facebook Page. This action cannot be undone.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_id": {
                        "type": "string",
                        "description": "The Facebook Page ID"
                    },
                    "post_id": {
                        "type": "string",
                        "description": "The ID of the post to delete"
                    }
                },
                "required": ["page_id", "post_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "success": {"type": "boolean", "description": "Whether the post was deleted"},
                    "deleted_post_id": {"type": "string", "description": "ID of the deleted post"}
                },
                "required": ["success"]
            }
        },
        "get_comments": {
            "display_name": "Get Comments",
            "description": "Retrieve comments on a Facebook Page post. Returns comment text, author info, timestamps, and reply counts.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "post_id": {
                        "type": "string",
                        "description": "The post ID to get comments from"
                    },
                    "limit": {
                        "type": "integer",
                        "description": "Maximum number of comments to return (default: 25, max: 100)",
                        "default": 25
                    },
                    "include_hidden": {
                        "type": "boolean",
                        "description": "Include hidden comments (default: false)",
                        "default": false
                    }
                },
                "required": ["post_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "comments": {
                        "type": "array",
                        "description": "List of comments on the post",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {"type": "string", "description": "Comment ID"},
                                "message": {"type": "string", "description": "Comment text"},
                                "from_name": {"type": "string", "description": "Commenter's name"},
                                "from_id": {"type": "string", "description": "Commenter's user ID"},
                                "created_time": {"type": "string", "description": "ISO 8601 timestamp"},
                                "is_hidden": {"type": "boolean", "description": "Whether comment is hidden"},
                                "reply_count": {"type": "integer", "description": "Number of replies"}
                            }
                        }
                    },
                    "total_count": {"type": "integer", "description": "Total number of comments on the post"}
                },
                "required": ["comments"]
            }
        },
        "manage_comment": {
            "display_name": "Manage Comment",
            "description": "Interact with comments on your Page posts. Reply, hide/unhide, or like/unlike comments.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_id": {
                        "type": "string",
                        "description": "The Facebook Page ID that owns the post"
                    },
                    "comment_id": {
                        "type": "string",
                        "description": "The comment ID to manage"
                    },
                    "action": {
                        "type": "string",
                        "enum": ["reply", "hide", "unhide", "like", "unlike"],
                        "description": "Action to perform: 'reply' to respond, 'hide'/'unhide' to toggle visibility, 'like'/'unlike' to react as your Page"
                    },
                    "message": {
                        "type": "string",
                        "description": "Required for 'reply' action: Your reply text"
                    }
                },
                "required": ["page_id", "comment_id", "action"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "success": {"type": "boolean", "description": "Whether the action succeeded"},
                    "action_taken": {"type": "string", "description": "The action that was performed"},
                    "reply_id": {"type": "string", "description": "ID of the reply comment (if action was 'reply')"},
                    "is_hidden": {"type": "boolean", "description": "Current hidden state (if action was 'hide' or 'unhide')"}
                },
                "required": ["success", "action_taken"]
            }
        },
        "delete_comment": {
            "display_name": "Delete Comment",
            "description": "Permanently delete a comment from a Facebook Page post. This action cannot be undone. You can only delete comments on posts from Pages you manage.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "page_id": {
                        "type": "string",
                        "description": "The Facebook Page ID that owns the post"
                    },
                    "comment_id": {
                        "type": "string",
                        "description": "The ID of the comment to delete"
                    }
                },
                "required": ["page_id", "comment_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "success": {"type": "boolean", "description": "Whether the comment was deleted"},
                    "deleted_comment_id": {"type": "string", "description": "ID of the deleted comment"}
                },
                "required": ["success"]
            }
        },
        "get_insights": {
            "display_name": "Get Insights",
            "description": "Retrieve analytics for a Facebook Page or post. Page metrics: follows, unfollows, engagements, video views, media views. Post metrics: engaged users, clicks, reactions. Note: Page must have 100+ likes.",
            "input_schema": {
                "type": "object",
                "properties": {
                    "target_type": {
                        "type": "string",
                        "enum": ["page", "post"],
                        "description": "Type of insights: 'page' for overall Page analytics, 'post' for specific post metrics"
                    },
                    "target_id": {
                        "type": "string",
                        "description": "The Page ID (for page insights) or Post ID (for post insights)"
                    },
                    "metrics": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "Specific metrics to retrieve. Defaults to common metrics if omitted."
                    },
                    "period": {
                        "type": "string",
                        "enum": ["day", "week", "days_28"],
                        "description": "Time period for page insights (default: 'days_28'). Ignored for post insights.",
                        "default": "days_28"
                    }
                },
                "required": ["target_type", "target_id"]
            },
            "output_schema": {
                "type": "object",
                "properties": {
                    "target_type": {"type": "string", "description": "Whether these are page or post insights"},
                    "target_id": {"type": "string", "description": "The Page or Post ID"},
                    "period": {"type": "string", "description": "Time period for the data"},
                    "metrics": {
                        "type": "object",
                        "description": "Key-value pairs of metric names and their values",
                        "additionalProperties": true
                    }
                },
                "required": ["target_type", "target_id", "metrics"]
            }
        }
    }
}
